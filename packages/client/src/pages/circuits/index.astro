---
import Card from "../../components/Card.astro";
import PageLayout from "../../layouts/PageLayout.astro";
import { getAllCircuits } from "../../services/circuits";

import iso3311a2 from "iso-3166-1-alpha-2";

const circuits = await getAllCircuits();
---

<PageLayout title="Circuits" titleText="Circuits">
  {
    circuits.map((circuit) => {
      return (
        <Card title={circuit.name}>
          <h3>{circuit.date_opened}</h3>
          <h3>{iso3311a2.getCountry(circuit.country)}</h3>
          <h3>Number of Layouts: {circuit.layouts?.length ?? 0}</h3>
        </Card>
      );
    })
  }
</PageLayout>
