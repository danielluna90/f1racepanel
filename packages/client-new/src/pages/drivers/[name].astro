---
import type { GetStaticPathsResult } from "astro";
import BaseLayout from "../../layouts/BaseLayout.astro";

import { ResponseTypes } from "f1racepanel-common";

import DriverBioCard from "../../components/cards/driver/DriverBioCard.astro";
import { getAllDrivers } from "../../services/drivers";

export async function getStaticPaths() {
  let rv: GetStaticPathsResult = [];

  const drivers = await getAllDrivers();
  drivers.forEach((driver: ResponseTypes.Driver) => {
    rv.push({
      props: { driverData: driver },
      params: { name: driver.name.toLowerCase().replace(" ", "-") },
    });
  });

  return rv;
}

interface Props {
  driverData: ResponseTypes.Driver;
}

const { driverData } = Astro.props;
---

<BaseLayout title=`${driverData.name}`>
  <DriverBioCard data={driverData} />
</BaseLayout>
